@page "/Completed"
@using HS.Shared.Components.Layout
@layout EmptyLayout

<style>

    /* Styling for the container */
    .Upcomingcontainer {
        overflow-y: auto;
        overflow-x: hidden;
        height: 80vh;
    }

    /* Centering the div */
    .DivCenter {
        display: flex;
        justify-content: center;
    }

    /* Styling for service card */
    .ServiceCard {
        margin-right: 5px;
        border-radius: 38px;
        margin-top: 20px;
    }

    /* Styling for header content */
    .headerContent {
        display: flex;
    }

    /* Styling for service name */
    .serviceName {
        margin-top: 7px;
    }

    /* Styling for completed status */
    .CompletedStatus {
        color: white;
        background: var(--mud-palette-success);
        border-radius: 10px;
        text-align: center;
        width: 85%;
        padding: 2px;
        font-size: medium;
    }

    /* Styling for reviews */
    .reviews {
        margin-top: 7px;
    }

    /* Media query for smaller screens */
    @@media (max-width: 410px) {
        .ServiceCard {
            width: 355px;
        }

        .serviceName {
            margin-top: 2px;
            font-size: larger;
        }

        .reviews {
            font-size: 14px;
            margin-top: 8px;
        }
    }

    /* Media query for even smaller screens */
    @@media (max-width: 375px) {
        .ServiceCard {
            width: 345px;
        }

        .serviceName {
            margin-top: 2px;
            font-size: larger;
        }

        .reviews {
            margin-top: 2px;
            font-size: small;
        }
    }

    /* Styling for card content */
    .cardContent {
        text-align: center;
    }

    /* Styling for chat icon */
    .chatIcon {
        height: 80px;
        margin-top: 27px;
        margin-right: 20px;
    }

    /* Styling for collapse */
    .Collapse {
        display: flex;
        justify-content: space-between;
        width: 96%;
    }

    /* Styling for card buttons */
    .cardbtn {
        width: 220px;
        border-radius: 32px;
        margin-top: 21px;
        padding: 16px;
    }

    /* Styling for cancel button */
    .cancelBtn {
        background-color: #F4ECFF !important;
        color: var(--mud-palette-primary);
    }

    /* Styling for sticky section */
    .Sticky {
        padding: 20px;
        position: fixed;
        bottom: 36px;
        width: 100%;
        border-top-left-radius: 55px;
        border-top-right-radius: 55px;
        text-align: center;
    }

    /* Styling for hiding cancel button */
    .HideCancel {
        display: none;
    }
</style>

<div class="Upcomingcontainer">

    <!-- Service cards -->
    <div class="row">
        <div class="col ml-3 mt-5 mb-5 ">

            <!-- First service card -->
            <MudCard Elevation="5" Class="ServiceCard">
                <MudCardHeader>
                    <CardHeaderContent>
                        <div class="headerContent">
                            <MudImage Src="images/s1.png" Elevation="0" Style="height:120px;" />
                            <div style="margin-left:26px;">
                                <MudText Class="serviceName font-weight-bold" Typo="Typo.h6">House Cleaning</MudText>
                                <MudText Class="mt-2" Typo="Typo.subtitle1">Jenny Wilson</MudText>
                                <MudText Class="CompletedStatus mt-2" Typo="Typo.h6">Completed</MudText>
                            </div>
                        </div>
                    </CardHeaderContent>
                    <CardHeaderActions>
                        <MudImage Src="images/chatIcon.png" Elevation="0" Class="chatIcon" />
                    </CardHeaderActions>
                </MudCardHeader>
                <MudCardContent>
                    <MudDivider DividerType="DividerType.Middle"></MudDivider>
                    <MudCollapse Expanded="_expanded1">
                        <div class="Collapse">
                            <MudText Typo="Typo.body1">Date & Time</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">Dec 23, 2024 | 10:00 - 12:00 AM</MudText>
                        </div>
                        <div class="Collapse">
                            <MudText Typo="Typo.body1">Location</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">267 New Avenue Park, New York</MudText>
                        </div>
                        <MudImage Src="images/location.png" Elevation="0" Style="width:100%" />
                        <div class="Collapse">
                            <MudButton Class="cardbtn" OnClick="OnCancelBookingClick" Variant="Variant.Outlined" Color="Color.Primary">Cancel Booking</MudButton>
                            <MudButton Class="cardbtn" Variant="Variant.Filled" Color="Color.Primary">View E-Receipt</MudButton>
                        </div>
                    </MudCollapse>
                    <div class="cardContent">
                        <MudIconButton OnClick="@(() => OnExpandCollapseClick(1))" Icon="@Icons.Material.Filled.KeyboardArrowDown" Color="Color.Default" />
                    </div>
                </MudCardContent>
            </MudCard>

            <!-- Second service card -->
            <MudCard Elevation="5" Class="ServiceCard">
                <MudCardHeader>
                    <CardHeaderContent>
                        <div class="headerContent">
                            <MudImage Src="images/s2.png" Elevation="0" Style="height:120px;" />
                            <div style="margin-left:26px;">
                                <MudText Class="serviceName font-weight-bold" Typo="Typo.h6">Garage Cleaning</MudText>
                                <MudText Class="mt-2" Typo="Typo.subtitle1">Florencio Dorrance</MudText>
                                <MudText Class="CompletedStatus mt-2" Typo="Typo.h6">Completed</MudText>
                            </div>
                        </div>
                    </CardHeaderContent>
                    <CardHeaderActions>
                        <MudImage Src="images/chatIcon.png" Elevation="0" Class="chatIcon" />
                    </CardHeaderActions>
                </MudCardHeader>
                <MudCardContent>
                    <MudDivider DividerType="DividerType.Middle"></MudDivider>
                    <MudCollapse Expanded="_expanded2">
                        <div class="Collapse">
                            <MudText Typo="Typo.body1">Date & Time</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">Dec 23, 2024 | 10:00 - 12:00 AM</MudText>
                        </div>
                        <div class="Collapse">
                            <MudText Typo="Typo.body1">Location</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">267 New Avenue Park, New York</MudText>
                        </div>
                        <MudImage Src="images/location.png" Elevation="0" Style="width:100%" />
                        <div class="Collapse">
                            <MudButton Class="cardbtn" OnClick="OnCancelBookingClick" Variant="Variant.Outlined" Color="Color.Primary">Cancel Booking</MudButton>
                            <MudButton Class="cardbtn" Variant="Variant.Filled" Color="Color.Primary">View E-Receipt</MudButton>
                        </div>
                    </MudCollapse>
                    <div class="cardContent">
                        <MudIconButton OnClick="@(() => OnExpandCollapseClick(2))" Icon="@Icons.Material.Filled.KeyboardArrowDown" Color="Color.Default" />
                    </div>
                </MudCardContent>
            </MudCard>

            <!-- Third service card -->
            <MudCard Elevation="5" Class="ServiceCard">
                <MudCardHeader>
                    <CardHeaderContent>
                        <div class="headerContent">
                            <MudImage Src="images/s3.png" Elevation="0" Style="height:120px;" />
                            <div style="margin-left:26px;">
                                <MudText Class="serviceName font-weight-bold" Typo="Typo.h6">Painting the Walls</MudText>
                                <MudText Class="mt-2" Typo="Typo.subtitle1">Benny Spanbauer</MudText>
                                <MudText Class="CompletedStatus mt-2" Typo="Typo.h6">Completed</MudText>
                            </div>
                        </div>
                    </CardHeaderContent>
                    <CardHeaderActions>
                        <MudImage Src="images/chatIcon.png" Elevation="0" Class="chatIcon" />
                    </CardHeaderActions>
                </MudCardHeader>
                <MudCardContent>
                    <MudDivider DividerType="DividerType.Middle"></MudDivider>
                    <MudCollapse Expanded="_expanded3">
                        <div class="Collapse">
                            <MudText Typo="Typo.body1">Date & Time</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">Dec 23, 2024 | 10:00 - 12:00 AM</MudText>
                        </div>
                        <div class="Collapse">
                            <MudText Typo="Typo.body1">Location</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">267 New Avenue Park, New York</MudText>
                        </div>
                        <MudImage Src="images/location.png" Elevation="0" Style="width:100%" />
                        <div class="Collapse">
                            <MudButton Class="cardbtn" OnClick="OnCancelBookingClick" Variant="Variant.Outlined" Color="Color.Primary">Cancel Booking</MudButton>
                            <MudButton Class="cardbtn" Variant="Variant.Filled" Color="Color.Primary">View E-Receipt</MudButton>
                        </div>
                    </MudCollapse>
                    <div class="cardContent">
                        <MudIconButton OnClick="@(() => OnExpandCollapseClick(3))" Icon="@Icons.Material.Filled.KeyboardArrowDown" Color="Color.Default" />
                    </div>
                </MudCardContent>
            </MudCard>

        </div>

    </div>

</div>

<!-- Sticky cancel booking section -->
<div class="@HideCancel">
    <!-- Cancel booking section -->
    <MudCard Class="Sticky DivCenter ">
        <div>
            <MudText Class="DivCenter" Typo="Typo.h4" Style="font-weight: bold;" Color="Color.Error">Cancel Booking</MudText>
            <br />
            <MudDivider DividerType="DividerType.Middle">  </MudDivider>
            <MudText Class="DivCenter" Typo="Typo.h4" Style="font-weight: bold;">
                Are you sure want to cancel your
                service booking?
            </MudText>
            <span class=" DivCenter mt-2">

            </span>
            <MudText Class="DivCenter mt-2" Typo="Typo.h6">
                Only 80% of the money you can refund from
                your payment according to our policy
            </MudText>
            <MudDivider Class="mt-5"> </MudDivider>
            <div class="Collapse">
                <MudButton Class="cardbtn cancelBtn" OnClick="OnCancelClick" Variant="Variant.Filled">Cancel </MudButton>
                <MudButton Class="cardbtn" OnClick="OnCancelClick" Variant="Variant.Filled" Color="Color.Primary">Yes,Cancel Booking</MudButton>
            </div>

        </div>
    </MudCard>
</div>

@code {

    // Injecting NavigationManager for navigation
    @inject NavigationManager Navigation;

    // Method to navigate back
    private void ClickBack()
    {
        Navigation.NavigateTo("Home");
    }

    // Flags for expansion/collapse of sections
    bool _expanded1 = false;
    bool _expanded2 = false;
    bool _expanded3 = false;

    // Hide cancel section flag
    string HideCancel = "HideCancel";

    // Method to handle expansion/collapse click
    private void OnExpandCollapseClick(int num)
    {
        if (num == 1)
        {
            _expanded1 = !_expanded1;
        }
        else if (num == 2)
        {
            _expanded2 = !_expanded2;
        }
        else if (num == 3)
        {
            _expanded3 = !_expanded3;
        }
    }

    // Method to handle cancel booking click
    private void OnCancelBookingClick()
    {
        HideCancel = "";
    }

    // Method to handle cancel click
    private void OnCancelClick()
    {
        HideCancel = "HideCancel";
    }
}
