@page "/Cancelled"
@using HS.Shared.Components.Layout
@layout EmptyLayout

<style>
    /* Styling for the container */
    .Upcomingcontainer {
        overflow-y: auto;
        overflow-x: hidden;
        height: 80vh;
    }

    /* Centering elements horizontally */
    .DivCenter {
        display: flex;
        justify-content: center;
    }

    /* Styling for service cards */
    .ServiceCard {
        margin-right: 5px;
        border-radius: 38px;
        margin-top: 20px;
    }

    /* Styling for header content */
    .headerContent {
        display: flex;
    }

    /* Styling for service name */
    .serviceName {
        margin-top: 7px;
    }

    /* Styling for cancel status */
    .CancelStatus {
        color: white;
        background: var(--mud-palette-error);
        border-radius: 10px;
        text-align: center;
        width: 85%;
        padding: 2px;
        font-size: medium;
    }

    /* Styling for reviews */
    .reviews {
        margin-top: 7px;
    }

  




    /* Styling for card content */
    .cardContent {
        text-align: center;
    }

    /* Styling for chat icon */
    .chatIcon {
        height: 80px;
        margin-top: 27px;
        margin-right: 20px;
    }

    .Collapse {
        display: flex;
        justify-content: space-between;
        width: 96%;
    }

    .cardbtn {
        width: 220px;
        border-radius: 32px;
        margin-top: 21px;
        padding: 16px;
    }

    .cancelBtn {
        background-color: #F4ECFF !important;
        color: var(--mud-palette-primary);
    }

    .Sticky {
        padding: 20px;
        position: fixed;
        bottom: 36px;
        width: 100%;
        border-top-left-radius: 55px;
        border-top-right-radius: 55px;
        text-align: center;
    }

    /* Styling to hide cancellation section */
    .HideCancel {
        display: none;
    }




    @@media only screen and (max-device-width: 480px) {

        .headerText {
            font-size: 2vh;
        }

        .contentText {
            font-size: 3vh;
        }

        .headerIcon {
            padding-left: 2px;
        }

        .ServiceImages {
            height: 50px;
            width: 50px;
        }

        .ServicesText {
            font-size: 2vh;
        }

        .ServiceCard .mud-card-header {
            width: 275px;
            height: 161px;
            margin-right: 0px;
        }

        .serviceName {
            margin-top: 7px;
            font-size: larger;
        }

        .BCardImg {
            height: 80px;
            margin-top: 22px;
        }

        .chatIcon {
            height: 56px;
            margin-top: 27px;
            margin-right: 0px;
        }

        .UpcomingStatus {
            width: 108%;
        }

        .cardbtn {
            font-size: xx-small;
        }

        .cardInsideText {
            font-size: x-small;
            text-align: center;
            width: 88%;
        }

        .cardbtn {
            font-size: xx-small;
            width: 138px;
            margin-left: 14px;
        }
    }

    @@media only screen and (min-device-width: 480px) {

        .BCardImg {
            height: 120px;
        }
    }

</style>

<!-- Container div for cancelled bookings -->
<div class="Upcomingcontainer">

    <!-- Row for service cards -->
    <div class="row">
        <div class="col  mt-5 mb-5 ">

            <!-- Service Card 1 -->
            <MudCard Elevation="5" Class="ServiceCard">
                <MudCardHeader>
                    <CardHeaderContent>
                        <div class="headerContent">
                            <!-- Service image -->
                            <MudImage Src="images/s1.png" Elevation="0" Class="BCardImg" />
                            <div style="margin-left:26px;">
                                <!-- Service name -->
                                <MudText Class="serviceName font-weight-bold" Typo="Typo.h6">House Cleaning</MudText>
                                <!-- Service provider -->
                                <MudText Class="mt-2" Typo="Typo.subtitle1">Jenny Wilson</MudText>
                                <!-- Cancelled status -->
                                <MudText Class="CancelStatus mt-2" Typo="Typo.h6">Cancelled</MudText>
                            </div>
                        </div>
                    </CardHeaderContent>
                    <CardHeaderActions>
                        <!-- Chat icon -->
                        <MudImage Src="images/chatIcon.png" Elevation="0" Class="chatIcon" />
                    </CardHeaderActions>
                </MudCardHeader>
                <MudCardContent>
                    <!-- Details collapse section -->
                    <MudDivider DividerType="DividerType.Middle"></MudDivider>
                    <MudCollapse Expanded="_expanded1">
                        <div class="Collapse">
                            <!-- Date and time -->
                            <MudText Typo="Typo.body1">Date & Time</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">Dec 23, 2024 | 10:00 - 12:00 AM</MudText>
                        </div>
                        <div class="Collapse">
                            <!-- Location -->
                            <MudText Typo="Typo.body1">Location</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">267 New Avenue Park, New York</MudText>
                        </div>
                        <!-- Location map image -->
                        <MudImage Src="images/location.png" Elevation="0" Style="width:100%" />
                        <div class="Collapse">
                            <!-- Buttons for cancellation and receipt -->
                            <MudButton Class="cardbtn" OnClick="OnCancelBookingClick" Variant="Variant.Outlined" Color="Color.Primary">Cancel Booking</MudButton>
                            <MudButton Class="cardbtn" Variant="Variant.Filled" Color="Color.Primary">View E-Receipt</MudButton>
                        </div>
                    </MudCollapse>
                    <!-- Expand/Collapse button -->
                    <div class="cardContent">
                        <MudIconButton OnClick="@(() => OnExpandCollapseClick(1))" Icon="@Icons.Material.Filled.KeyboardArrowDown" Color="Color.Default" />
                    </div>
                </MudCardContent>
            </MudCard>

            <MudCard Elevation="5" Class="ServiceCard">
                <MudCardHeader>
                    <CardHeaderContent>
                        <div class="headerContent">
                            <MudImage Src="images/s2.png" Elevation="0" Class="BCardImg" />
                            <div style="margin-left:26px;">
                                <MudText Class="serviceName font-weight-bold" Typo="Typo.h6">Garage Cleaning</MudText>
                                <MudText Class="mt-2" Typo="Typo.subtitle1">Florencio Dorrance</MudText>
                                <MudText Class="CancelStatus mt-2" Typo="Typo.h6">Cancelled</MudText>
                            </div>
                        </div>
                    </CardHeaderContent>
                    <CardHeaderActions>
                        <MudImage Src="images/chatIcon.png" Elevation="0" Class="chatIcon" />
                    </CardHeaderActions>
                </MudCardHeader>
                <MudCardContent>
                    <MudDivider DividerType="DividerType.Middle"></MudDivider>
                    <MudCollapse Expanded="_expanded2">
                        <div class="Collapse">
                            <MudText Typo="Typo.body1">Date & Time</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">Dec 23, 2024 | 10:00 - 12:00 AM</MudText>
                        </div>
                        <div class="Collapse">
                            <MudText Typo="Typo.body1">Location</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">267 New Avenue Park, New York</MudText>
                        </div>
                        <MudImage Src="images/location.png" Elevation="0" Style="width:100%" />
                        <div class="Collapse">
                            <MudButton Class="cardbtn" OnClick="OnCancelBookingClick" Variant="Variant.Outlined" Color="Color.Primary">Cancel Booking</MudButton>
                            <MudButton Class="cardbtn" Variant="Variant.Filled" Color="Color.Primary">View E-Receipt</MudButton>
                        </div>
                    </MudCollapse>
                    <div class="cardContent">
                        <MudIconButton OnClick="@(() => OnExpandCollapseClick(2))" Icon="@Icons.Material.Filled.KeyboardArrowDown" Color="Color.Default" />
                    </div>
                </MudCardContent>
            </MudCard>


            <MudCard Elevation="5" Class="ServiceCard">
                <MudCardHeader>
                    <CardHeaderContent>
                        <div class="headerContent">
                            <MudImage Src="images/s3.png" Elevation="0" Class="BCardImg" />
                            <div style="margin-left:26px;">
                                <MudText Class="serviceName font-weight-bold" Typo="Typo.h6">Painting the Walls</MudText>
                                <MudText Class="mt-2" Typo="Typo.subtitle1">Benny Spanbauer</MudText>
                                <MudText Class="CancelStatus mt-2" Typo="Typo.h6">Cancelled</MudText>
                            </div>
                        </div>
                    </CardHeaderContent>
                    <CardHeaderActions>
                        <MudImage Src="images/chatIcon.png" Elevation="0" Class="chatIcon" />
                    </CardHeaderActions>
                </MudCardHeader>
                <MudCardContent>
                    <MudDivider DividerType="DividerType.Middle"></MudDivider>
                    <MudCollapse Expanded="_expanded3">
                        <div class="Collapse">
                            <MudText Typo="Typo.body1">Date & Time</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">Dec 23, 2024 | 10:00 - 12:00 AM</MudText>
                        </div>
                        <div class="Collapse">
                            <MudText Typo="Typo.body1">Location</MudText> <MudText Class="font-weight-bold" Typo="Typo.h6">267 New Avenue Park, New York</MudText>
                        </div>
                        <MudImage Src="images/location.png" Elevation="0" Style="width:100%" />
                        <div class="Collapse">
                            <MudButton Class="cardbtn" OnClick="OnCancelBookingClick" Variant="Variant.Outlined" Color="Color.Primary">Cancel Booking</MudButton>
                            <MudButton Class="cardbtn" Variant="Variant.Filled" Color="Color.Primary">View E-Receipt</MudButton>
                        </div>
                    </MudCollapse>
                    <div class="cardContent">
                        <MudIconButton OnClick="@(() => OnExpandCollapseClick(3))" Icon="@Icons.Material.Filled.KeyboardArrowDown" Color="Color.Default" />
                    </div>
                </MudCardContent>
            </MudCard>
        </div>
    </div>

</div>

<!-- Sticky cancellation section -->
<div class="@HideCancel">
    <MudCard Class="Sticky DivCenter ">
        <div>
            <!-- Cancellation header -->
            <MudText Class="cardInsideText" Typo="Typo.h4" Style="font-weight: bold;" Color="Color.Error">Cancel Booking</MudText>
            <br />
            <MudDivider DividerType="DividerType.Middle"> </MudDivider>
            <!-- Cancellation confirmation text -->
            <MudText Class=" cardInsideText" Typo="Typo.h4" Style="font-weight: bold;">
                Are you sure want to cancel your
                service booking?
            </MudText>
            <span class="DivCenter mt-2"></span>
            <!-- Cancellation policy text -->
            <MudText Class=" mt-2 cardInsideText" Typo="Typo.h6">
                Only 80% of the money you can refund from

            </MudText>
            <MudText Class="  cardInsideText" Typo="Typo.h6">

                your payment according to our policy
            </MudText>
            <MudDivider Class="mt-5"> </MudDivider>
            <!-- Cancel and confirm buttons -->
            <div class="Collapse">
                <MudButton Class=" cancelBtn Collapsebtn" OnClick="OnCancelClick" Variant="Variant.Filled">Cancel</MudButton>
                <MudButton Class=" Collapsebtn" OnClick="OnCancelClick" Variant="Variant.Filled" Color="Color.Primary">Yes,Cancel Booking</MudButton>
            </div>
        </div>
    </MudCard>
</div>

@code {
    // Injecting NavigationManager for navigation functionality
    @inject NavigationManager Navigation;

    // Method to handle back button click
    private void ClickBack()
    {
        Navigation.NavigateTo("Home");
    }

    // Boolean variables for expand/collapse functionality
    bool _expanded1 = false;
    bool _expanded2 = false;
    bool _expanded3 = false;

    // String variable to control visibility of cancellation section
    string HideCancel = "HideCancel";

    // Method to handle expand/collapse button click
    private void OnExpandCollapseClick(int num)
    {
        if (num == 1)
        {
            _expanded1 = !_expanded1;
        }
        else if (num == 2)
        {
            _expanded2 = !_expanded2;
        }
        else if (num == 3)
        {
            _expanded3 = !_expanded3;
        }
    }

    // Method to show cancellation section
    private void OnCancelBookingClick()
    {
        HideCancel = "";
    }

    // Method to hide cancellation section
    private void OnCancelClick()
    {
        HideCancel = "HideCancel";
    }
}
